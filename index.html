<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>nyamachoma</title>
  <link rel="stylesheet" href="styles/styles.css">
  <audio id="bgm" audio autoplay loop>
    <source src="sounds/menu.mp3" type="audio/mpeg">
  </audio>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/site.webmanifest">
</head>
<body>
    <img src="images/fork.png" alt="fork" class="fork-image">
    <div class="title-container" style="position: relative;">
       <h1 class="title" style="position: relative; z-index: 1;">nyama choma</h1> 
       <div class="title-ellipse" style="position: absolute; z-index: 0;"></div>
    </div>
    <div class="section-1">
        <div class="gallery-container" onclick="window.location.href='gallery.html'">
            <h1 class="option-text">gallery</h1> 
            <h1 class="option-shade-1">yumba ya sanaa</h1>  
        </div>
        <div class="about-container" onclick="window.location.href='about.html'">
            <h1 class="option-text">about</h1> 
            <h1 class="option-shade-2">kuhusu</h1> 
        </div>
    </div>
    <div class="tv-image">
        <img src="images/tvoff.png" alt="tv">
        <video id="tv-video" autoplay muted playsinline class="tv-video">
            <source src="channels/channel1.mp4" type="video/mp4">
        </video>
        <h1 class="tv-sticker">LOVEYOURSTV</h1>
        <div class="tv-ellipse" style="position: absolute; z-index: 0;"></div>
    </div>
    <div class="contact-container" onclick="window.location.href='contact.html'">
        <h1 class="option-text">contact</h1> 
        <h1 class="option-shade-3">mawasiliano</h1> 
    </div>
    <div class="promo-container">
        <div class="promo-marquee">
            <div class="promo-track">
                <span>infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓</span>
                <span>infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓infoBELOW↓</span>
            </div>
        </div>
        <h1 class="promo-subheader">
            read the pricing information below carefully. <br>
            any questions? reach us via the contact tab. <br>
            ready? click the button to book your session. <br>
            :3
             <br>
        </h1>
        <div class="promo-images">
            <img src="images/promos/DSi XL Pricing.png" alt="DSi Pricing" class="promo-image">
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSdPQfgwIxmIn9UpPBz8YtsGFQMazECLkgkFltZb1UzVp88ksA/viewform?usp=dialog" target="_blank" class="book-button">
            book here ♥
            </a>
        </div>
    </div>
    <div class="promo-strip-wrap">
        <h2 class="promo-header">my <br>cams &gt;</h2>
        <div class="promo-strip">
            <a class="promo-thumb-link" href="https://en.wikipedia.org/wiki/Nikon_F4" target="_blank" rel="noopener noreferrer" aria-label="Nikon F4 (Wikipedia)">
                <img class="promo-thumb" src="images/cams/3-KM8540-1-Picsart-BackgroundRemover.png" alt="Nikon F4" loading="lazy">
            </a>

            <a class="promo-thumb-link" href="https://www.polaroid-passion.com/manuel/manuel-polaroid-SLR-680.pdf" target="_blank" rel="noopener noreferrer" aria-label="Polaroid SLR 680 manual (PDF)">
                <img class="promo-thumb" src="images/cams/Polaroid_SLR_680_1-Picsart-BackgroundRemover.png" alt="Polaroid SLR 680" loading="lazy">
            </a>

            <a class="promo-thumb-link" href="https://www.manua.ls/olympus/infinity-zoom-105/manual" target="_blank" rel="noopener noreferrer" aria-label="Olympus Infinity Zoom 105 manual">
                <img class="promo-thumb" src="images/cams/RC-VR-1153_1-Picsart-BackgroundRemover.png" alt="Olympus Infinity Zoom 105" loading="lazy">
            </a>

            <a class="promo-thumb-link" href="https://www.grsv.com/downloads/brochures/Sony-HVR-Z1U-Brochure.pdf" target="_blank" rel="noopener noreferrer" aria-label="Sony HVR-Z1U brochure (PDF)">
                <img class="promo-thumb" src="images/cams/Sony_HVRZ1U_HVR_Z1U_1_3_3_CCD_HDV_357486-Picsart-BackgroundRemover.png" alt="Sony HVR-Z1U" loading="lazy">
            </a>

            <a class="promo-thumb-link" href="https://global.canon/en/c-museum/product/dcc513.html" target="_blank" rel="noopener noreferrer" aria-label="Canon museum: DC C513">
                <img class="promo-thumb" src="images/cams/x280PSSD450-Picsart-BackgroundRemover.png" alt="Canon DC C513" loading="lazy">
            </a>
        </div>
    </div>
    <div class="promo-marquee marquee--reverse">
        <div class="promo-track-2">
            <span>joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓</span>
            <span>joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓joinOURmailingLIST↓</span>
        </div>
    </div>
    <h1 class="promo-subheader">sign up to get promotional offers!</h1>
    <div class="subscribe-form-wrap">
        <script async src="https://eocampaign1.com/form/0f8115e0-8e21-11f0-8189-731fd3643ccb.js" data-form="0f8115e0-8e21-11f0-8189-731fd3643ccb"></script>
    </div>
    <audio id="menuClickAudio" src="sounds/menu-click.mp3" preload="auto"></audio>
    <script type="module">
    const videos = [
    'channels/channel1.mp4',
    'channels/channel2.mp4',
    'channels/channel3.mp4',
    'channels/channel4.mp4',
    'channels/channel5.mp4',
    'channels/channel6.mp4',
    'channels/channel7.mp4',
    'channels/channel8.mp4',
    'channels/channel9.mp4',
    'channels/channel10.mp4',
    'channels/channel11.mp4',
    'channels/channel12.mp4',
    'channels/channel13.mp4',
    'channels/channel14.mp4'
    ];

    const videoElement = document.getElementById('tv-video');

    function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
    }

    const order = shuffle([...Array(videos.length).keys()]);

    let currentPos = 0;

    function playCurrent() {
    const idx = order[currentPos];
    videoElement.src = videos[idx];
    videoElement.play();
    }

    playCurrent();

    videoElement.addEventListener('ended', () => {
    currentPos = (currentPos + 1) % order.length;
    playCurrent();
    });


    document.querySelector('.book-button').addEventListener('click', function(e) {
        e.preventDefault();
        
        const audio = document.getElementById('menuClickAudio');
        const href = this.href;
        
        const playAudio = () => {
            if (audio && audio.readyState >= 2) {
                audio.currentTime = 0;
                audio.play().catch(() => {
                    console.log('Audio play failed, continuing with navigation');
                });
            }
        };
        
        playAudio();
        setTimeout(() => {
            window.open(href, '_blank');
        }, 180);
    });
    document.querySelectorAll('.promo-thumb-link').forEach(link => {
    link.addEventListener('click', () => {
        const audio = document.getElementById('menuClickAudio');
        if (!audio) return;
        audio.pause();
        audio.currentTime = 0;
        audio.muted = false;
        audio.play();
    });
    });

    function playAndNavigate(url) {
    const audio = document.getElementById('menuClickAudio');
    audio.currentTime = 0;
    audio.play();
    setTimeout(() => {
        window.location.href = url;
    }, 180);
    }

    document.querySelector('.gallery-container').onclick = function(e) {
    e.stopPropagation();
    playAndNavigate('gallery.html');
    };
    document.querySelector('.about-container').onclick = function(e) {
    e.stopPropagation();
    playAndNavigate('about.html');
    };
    document.querySelector('.contact-container').onclick = function(e) {
    e.stopPropagation();
    playAndNavigate('contact.html');
    };
    document.querySelector('.tv-image').addEventListener('click', function() {
    const bgm = document.getElementById('bgm');
    if (bgm.paused) {
        bgm.muted = false;
        bgm.currentTime = 0;
        bgm.play();
    } else {
        bgm.muted = false;
    }
    });

    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, doc, setDoc, increment, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAPHalnYFfFkCJspSeWNytSngnpEWC9lNk",
        authDomain: "nyamachoma-57d58.firebaseapp.com",
        projectId: "nyamachoma-57d58",
        storageBucket: "nyamachoma-57d58.firebasestorage.app",
        messagingSenderId: "1090224589648",
        appId: "1:1090224589648:web:c8a08e362ea132a7e6ba55",
        measurementId: "G-N7DGBF6Q79"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    (async function trackPageView() {
        const pagePath = window.location.pathname || '/';
        const pageKey  = pagePath.replace(/\//g, '__');

        try {
        await setDoc(
            doc(db, 'pageViews', pageKey),
            {
            path: pagePath,
            count: increment(1),
            updatedAt: serverTimestamp(),
            referrer: document.referrer || null,
            ua: navigator.userAgent
            },
            { merge: true }
        );
        } catch (e) {
        console.warn('page view log failed:', e);
        }
    })();
    </script>
</body>
</html>